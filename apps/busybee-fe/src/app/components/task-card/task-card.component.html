<li class="group bg-base-100 border border-base-content/20 rounded-lg mb-4 transition-all duration-200 hover:shadow-md hover:border-base-content/40 hover:-translate-y-0.5" style="box-shadow: 0 1px 2px 0 rgba(255, 255, 255, 0.08);">
  <div class="flex items-start gap-3 py-3 px-4 hover:bg-base-200/30 transition-colors cursor-pointer rounded-lg">
    <!-- Checkbox -->
    <button
      type="button"
      class="mt-px flex-shrink-0 w-[18px] h-[18px] rounded-full border-[1.5px] flex items-center justify-center transition-all hover:border-base-content/40"
      [class.border-base-content/25]="!task().completed && task().priority === Priority.LOW"
      [class.hover:border-info]="!task().completed && task().priority === Priority.LOW"
      [class.border-warning]="!task().completed && task().priority === Priority.MEDIUM"
      [class.hover:border-warning]="!task().completed && task().priority === Priority.MEDIUM"
      [class.border-error]="!task().completed && task().priority === Priority.HIGH"
      [class.hover:border-error]="!task().completed && task().priority === Priority.HIGH"
      [class.bg-base-content/25]="task().completed"
      [class.border-base-content/25]="task().completed"
      (click)="onToggleComplete(); $event.stopPropagation()"
    >
      @if (task().completed) {
        <svg class="w-[10px] h-[10px] text-base-100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4">
          <path d="M5 12l5 5L20 7" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      }
    </button>

    <!-- Task Content -->
    <div class="flex-1 min-w-0 py-0.5 flex justify-between items-end gap-4">
      <!-- Left side: Title, Description, Tags, Priority -->
      <div class="flex-1 min-w-0">
        <!-- Title -->
        <p
          class="text-[13.5px] leading-[1.35] text-base-content font-normal"
          [class.line-through]="task().completed"
          [class.text-base-content/35]="task().completed"
        >
          {{ task().title }}
        </p>

        <!-- Description (if exists) -->
        @if (task().description) {
          <p
            class="text-[12.5px] leading-[1.4] text-base-content/45 mt-0.5"
            [class.text-base-content/25]="task().completed"
          >
            {{ task().description }}
          </p>
        }

        <!-- Metadata: Tags, Priority -->
        @if (task().tags.length > 0 || true) {
          <div class="flex flex-wrap items-center gap-2 mt-2">
            <!-- Tags -->
            @for (tag of task().tags; track tag) {
              <span class="text-xs text-base-content/60 font-normal flex items-center gap-1.5">
                <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M7 7h.01" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                {{ tag }}
              </span>
            }

            <!-- Priority Badge -->
            <span
              class="text-xs px-3 py-1.5 rounded-full font-normal"
              [class.text-red-700]="task().priority === Priority.HIGH"
              [class.bg-red-100]="task().priority === Priority.HIGH"
              [class.text-yellow-700]="task().priority === Priority.MEDIUM"
              [class.bg-yellow-100]="task().priority === Priority.MEDIUM"
              [class.text-gray-600]="task().priority === Priority.LOW"
              [class.bg-gray-100]="task().priority === Priority.LOW"
            >
              {{ priorityLabel }}
            </span>
          </div>
        }
      </div>

    </div>

    <!-- Due Date (right side, bottom aligned) -->
    @if (task().dueDate) {
      <span
        class="text-xs font-normal flex items-center gap-1.5 flex-shrink-0 self-end"
        [class.text-base-content/60]="!isOverdue && !isDueToday && !task().completed"
        [class.text-warning]="isDueToday && !task().completed"
        [class.text-error]="isOverdue && !task().completed"
        [class.text-base-content/40]="task().completed"
      >
        <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <path d="M16 2v4M8 2v4M3 10h18" stroke-linecap="round"/>
        </svg>
        {{ formatDate(task().dueDate) }}
      </span>
    }

    <!-- Actions (visible on hover on desktop, always visible on mobile) -->
    <div class="flex items-center gap-0.5 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity self-start pt-0.5">
      <button
        class="p-1.5 rounded hover:bg-base-200 text-base-content/40 hover:text-base-content transition-colors"
        (click)="onEdit(); $event.stopPropagation()"
        aria-label="Edit task"
        title="Edit"
      >
        <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button
        class="p-1.5 rounded hover:bg-error/10 text-base-content/40 hover:text-error transition-colors"
        (click)="onDelete(); $event.stopPropagation()"
        aria-label="Delete task"
        title="Delete"
      >
        <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M10 11v6M14 11v6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>
</li>
